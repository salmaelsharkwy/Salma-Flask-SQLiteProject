{% extends 'base.html' %}

{% block content %}
<div class="dashboard-container">
    <div class="glass-card">
        
        <div class="dashboard-header">
            <div class="profile-section">
                <div class="avatar-container">
                    {% if user['profile_pic'] %}
                        <img src="{{ url_for('static', filename='profile_pics/' + user['profile_pic']) }}" class="profile-img">
                    {% else %}
                        <div class="avatar-placeholder">{{ user['username'][0] | upper }}</div>
                    {% endif %}
                </div>
                
                <form action="{{ url_for('upload_pic') }}" method="POST" enctype="multipart/form-data">
                    <label for="file-upload" class="upload-btn-icon" title="Change Picture">
                        <i class="fas fa-camera"></i>
                    </label>
                    <input type="file" name="profile_pic" id="file-upload" style="display: none;" onchange="this.form.submit()">
                </form>
            </div>
            
            <div class="user-info">
                <h2>Hello, {{ user['username'] }}!</h2>
                <p class="subtitle">
                    <i class="far fa-clock"></i> Last Login: {{ user['last_login'] if user['last_login'] else 'Welcome!' }}
                </p>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-users stat-icon"></i>
                <div>
                    <span class="stat-value">1,205</span>
                    <span class="stat-label">Total Visits</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-check-circle stat-icon" style="color: #10b981;"></i>
                <div>
                    <span class="stat-value">98%</span>
                    <span class="stat-label">Tasks Done</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-wallet stat-icon" style="color: #f59e0b;"></i>
                <div>
                    <span class="stat-value">$540</span>
                    <span class="stat-label">Balance</span>
                </div>
            </div>
        </div>

        <h3><i class="fas fa-history"></i> Recent Activity</h3>
        <div style="overflow-x: auto;">
            <table class="modern-table">
                <thead>
                    <tr><th>ID</th><th>Activity</th><th>Date</th><th>Status</th><th>Amount</th></tr>
                </thead>
                <tbody>
                    <tr><td>#1001</td><td>Subscription</td><td>2025-12-01</td><td><span class="status completed">Completed</span></td><td>$120.00</td></tr>
                    <tr><td>#1002</td><td>Upgrade</td><td>2025-12-05</td><td><span class="status completed">Completed</span></td><td>$50.00</td></tr>
                    <tr><td>#1003</td><td>Withdrawal</td><td>2025-12-07</td><td><span class="status pending">Pending</span></td><td>$200.00</td></tr>
                </tbody>
            </table>
        </div>

    </div>
</div>
{% endblock %}