{% extends 'base.html' %}

{% block content %}
<div class="dashboard-container">
    <div class="glass-card">
        <div class="dashboard-header">
            <div class="profile-section">
                <div class="avatar-container">
                    {% if user['profile_pic'] %}
                    <img src="{{ url_for('static', filename='profile_pics/' + user['profile_pic']) }}" class="profile-img">
                    {% else %}
                    <div class="avatar-placeholder">{{ user['username'][0] }}</div>
                    {% endif %}
                </div>
                <form method="POST" action="/upload_pic" enctype="multipart/form-data" style="display: none;" id="upload-form">
                    <input type="file" name="profile_pic" id="file-input" accept="image/*" onchange="this.form.submit()">
                </form>
                <label for="file-input" class="upload-btn-icon">
                    <i class="fas fa-camera"></i>
                </label>
            </div>
            <div>
                <h2>Welcome, {{ user['username'] }}!</h2>
                <p class="subtitle">Last Login: {{ user['last_login'] if user['last_login'] else 'Welcome!' }}</p>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-check-circle stat-icon"></i>
                <div>
                    <span class="stat-value">Active</span>
                    <span class="stat-label">Account Status</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-clock stat-icon"></i>
                <div>
                    <span class="stat-value">Recent</span>
                    <span class="stat-label">Last Activity</span>
                </div>
            </div>
            <div class="stat-card">
                <i class="fas fa-shield-alt stat-icon"></i>
                <div>
                    <span class="stat-value">Secured</span>
                    <span class="stat-label">Protection Level</span>
                </div>
            </div>
        </div>

        <h3 style="margin-bottom: 15px;"><i class="fas fa-chart-line"></i> Recent Activity</h3>
        <table class="modern-table">
            <thead>
                <tr>
                    <th>Action</th>
                    <th>Status</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Profile Access</td>
                    <td><span class="status completed">Completed</span></td>
                    <td>{{ user['last_login'] if user['last_login'] else 'Just now' }}</td>
                </tr>
                <tr>
                    <td>Security Check</td>
                    <td><span class="status completed">Passed</span></td>
                    <td>{{ user['last_login'] if user['last_login'] else 'Just now' }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
